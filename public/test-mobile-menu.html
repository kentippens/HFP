<!DOCTYPE html>
<html>
<head>
    <title>Mobile Menu Test</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { margin: 0; padding: 20px; font-family: Arial, sans-serif; }
        .test-results { margin: 20px 0; padding: 20px; background: #f0f0f0; border-radius: 5px; }
        .success { color: green; font-weight: bold; }
        .error { color: red; font-weight: bold; }
        .info { color: blue; }
        button { padding: 10px 20px; margin: 10px 0; cursor: pointer; }
    </style>
</head>
<body>
    <h1>Mobile Menu Functionality Test</h1>
    
    <div class="test-results">
        <h2>Test Results:</h2>
        <div id="results"></div>
    </div>
    
    <button onclick="runTests()">Run Mobile Menu Tests</button>
    
    <script>
        function runTests() {
            const results = document.getElementById('results');
            results.innerHTML = '';
            
            // Test 1: Check if jQuery is loaded
            addResult('jQuery Loaded', typeof jQuery !== 'undefined');
            
            // Test 2: Check if hamburger button exists
            const hamburger = document.querySelector('.bixol-mobile-hamburger');
            addResult('Hamburger Button Exists', hamburger !== null);
            
            // Test 3: Check if mobile menu exists
            const mobileMenu = document.querySelector('.bixol-mobile-menu');
            addResult('Mobile Menu Exists', mobileMenu !== null);
            
            // Test 4: Check if main.js is loaded (check for Bixol object)
            addResult('Main.js Loaded (Bixol object)', typeof window.Bixol !== 'undefined');
            
            // Test 5: Check initial menu state
            if (mobileMenu) {
                const initialLeft = window.getComputedStyle(mobileMenu).left;
                addResult('Menu Initially Hidden', initialLeft === '-250px' || initialLeft === '-220px', 'Left: ' + initialLeft);
            }
            
            // Test 6: Simulate click and check state change
            if (hamburger && mobileMenu && typeof jQuery !== 'undefined') {
                jQuery(hamburger).click();
                setTimeout(() => {
                    const hasActiveClass = mobileMenu.classList.contains('mobile-menu-active');
                    addResult('Menu Toggle Works', hasActiveClass, 'Has active class: ' + hasActiveClass);
                    
                    // Check computed style
                    const activeLeft = window.getComputedStyle(mobileMenu).left;
                    addResult('Menu Slides In', activeLeft === '0px', 'Left: ' + activeLeft);
                    
                    // Toggle back
                    jQuery(hamburger).click();
                }, 100);
            }
            
            // Test 7: Check for submenu functionality
            const submenuLinks = document.querySelectorAll('.bixol-mobile-menu ul li.has-submenu a');
            addResult('Submenu Links Found', submenuLinks.length > 0, 'Count: ' + submenuLinks.length);
        }
        
        function addResult(test, passed, info = '') {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = passed ? 'success' : 'error';
            div.innerHTML = `${test}: ${passed ? 'PASSED' : 'FAILED'} ${info ? '<span class="info">(' + info + ')</span>' : ''}`;
            results.appendChild(div);
        }
        
        // Load the page in an iframe to test
        const iframe = document.createElement('iframe');
        iframe.src = 'http://127.0.0.1:8000';
        iframe.style.width = '100%';
        iframe.style.height = '500px';
        iframe.style.border = '1px solid #ccc';
        iframe.style.marginTop = '20px';
        document.body.appendChild(iframe);
        
        iframe.onload = function() {
            const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
            window.jQuery = iframe.contentWindow.jQuery;
            window.Bixol = iframe.contentWindow.Bixol;
            
            // Auto-run tests after iframe loads
            setTimeout(runTests, 1000);
        };
    </script>
</body>
</html>