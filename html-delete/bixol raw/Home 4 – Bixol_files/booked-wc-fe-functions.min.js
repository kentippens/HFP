(function(e,t,n){var i,f=e(t),o=e(n);o.ready(function(){e(n).on("booked-on-new-app",function(){i=e(".field.field-paid-service"),r(i)}),c(),m(),l(),e(n).on("booked-before-loading-calendar-booking-options",function(){d()}),e(n).on("booked-before-loading-booking-form",function(){u()}),e(n).on("booked-on-requested-appointment",function(e,t){t.redirect=h()})});function r(t){if(n=e("select",t),n.find("option").length<3){n.find("option:first-child").remove();var n,s=parseInt(n.data("calendar-id")),o=n.val(),i=n.attr("name"),r=n.parent().find(".paid-variations");a(o,i,s,r)}n.on("change",function(){var t=e(this),n=parseInt(t.data("calendar-id")),s=t.val(),o=t.attr("name"),i=t.parent().find(".paid-variations");a(s,o,n,i)})}function a(t,n,s,o){if(!t){o.html("");return}var i={action:booked_wc_variables.prefix+"load_variations",product_id:parseInt(t),calendar_id:s,field_name:n};e.post(booked_wc_variables.ajaxurl,i,function(e){o.html(e),resize_booked_modal()})}function c(){e(".booked-profile-appt-list .appt-block .edit").on("click",function(n){n.preventDefault();var s=e(this),i=s.attr("data-appt-id"),o=s.attr("data-app-calendar");return booked_wc_variables.i18n_confirm_appt_edit?confirm_edit=confirm(booked_wc_variables.i18n_confirm_appt_edit):confirm_edit=!0,confirm_edit===!0&&(t.location.href=o),!1})}function l(){e(".booked-profile-appt-list .appt-block .pay").on("click",function(n){n.preventDefault();var s,o=e(this),i=o.attr("data-appt-id");return confirm_edit=confirm(booked_wc_variables.i18n_pay),confirm_edit===!0&&(s={action:booked_wc_variables.prefix+"add_to_cart",app_id:i},jQuery.post(booked_wc_variables.ajaxurl,s,function(e){e.status==="success"?t.location.href=booked_wc_variables.checkout_page:alert(e.messages[0])},"json")),!1})}function d(){if(!booked_load_calendar_date_booking_options)return;var e,s=t.location.href,o=s.replace(/^[^?]+\??/gi,""),n=!!o&&o.split("&");if(n&&s.match("booked_wc_extension"))for(e=0;e<n.length;e++){var i=n[e].split("="),a=i[0].replace(/_\d+$/,""),r=i[1];booked_load_calendar_date_booking_options[a]=r}}function u(){if(!booked_appt_form_options)return;var e,s=t.location.href,o=s.replace(/^[^?]+\??/gi,""),n=!!o&&o.split("&");if(n&&s.match("booked_wc_extension"))for(e=0;e<n.length;e++){var i=n[e].split("="),a=i[0].replace(/_\d+$/,""),r=i[1];booked_appt_form_options[a]=r}}function h(){var n=!1,s=e("form#newAppointmentForm");return e(".field-paid-service",s).each(function(){var t=e(this);e("select",t).each(function(){var t=e(this);t.val()!==""&&(n=!0)})}),!!n&&(t.location=booked_wc_variables.checkout_page,!0)}function m(){o.on("click",".booked-form input#submit-edit-request-appointment",function(n){var s=e(this);e("form#newAppointmentForm p.status").show().html('<i class="fa-solid fa-circle-notch fa-spin"></i>&nbsp;&nbsp;&nbsp;'+booked_js_vars.i18n_please_wait),resize_booked_modal(),n.preventDefault(),e.ajax({type:"post",url:booked_js_vars.ajax_url,data:e("#newAppointmentForm").serialize(),success:function(n){n=n.split("###");var o=n[0].substr(n[0].length-5);o=="error"?(s.attr("disabled",!1),s.parents("form").find("button.cancel").show(),e(".booked-form input").each(function(){thisDefault=e(this).attr("title"),thisVal=e(this).val(),thisVal||e(this).val(thisDefault)}),e("form#newAppointmentForm p.status").show().html('<i class="fa-solid fa-triangle-exclamation" style="color:#E35656"></i>&nbsp;&nbsp;&nbsp;'+n[1]),resize_booked_modal()):t.location=booked_js_vars.profilePage}})})}})(jQuery,window,document)